{"name":"Heal Macro","permission":{"default":0,"QqEx1p1vctEppjEy":3},"type":"script","flags":{"macro-marker":{"activeData":{"icon":"icons/svg/dice-target.svg","tooltip":"New Macro","colour":"#ff0000","trigger":""}},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.nGpVaV6eTFgO8BPe"}},"scope":"global","command":"var heal = 20;\nvar targets = game.users.get(game.user.id).targets;\nfor (var target of targets) {\n    var a = target.actor;\n    \n    var hp = a.data.data.attributes.hp;\n    var gap = heal;\n    if (hp.value + heal > hp.max) {\n        gap = hp.max - hp.value;\n        hp.value = hp.max;\n    } else\n        hp.value = hp.value + heal;\n\n    a.update({\"data.attributes.hp.value\": hp.value});\n    let chatData = {\"content\": a.name + \" (+\" + gap + \")\", \"speaker\": ChatMessage.getSpeaker({ actor: a })};\n    ChatMessage.create(chatData); \n}","author":"QqEx1p1vctEppjEy","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"4wOWtean7zdqmeTX"}
